paths:
  /competitions/{competitionSeq}/fop/match/result:
    patch:
      summary: 진행중 경기 결과 선택
      tags:
        - FOP
      parameters:
        - name: competitionSeq
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - competitionMatchPsSeq
                - resultDecision
              properties:
                competitionMatchPsSeq:
                  type: integer
                  description:
                    '매치 seq'
                  example: "1234"
                winnerMatchSideType:
                  type: string
                  enum:
                    - HOME
                    - AWAY
                  description:
                    '토너먼트 승자, 컷오프 일 땐 null'
                  example: "HOME"
                resultDecision:
                  type: string
                  enum:
                    - PTF
                    - RSC
                    - WDR
                    - DSQ
                    - PUN
                  description:
                    '경기 결과 코드'
                  example: "WDR"
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                  error:
                    nullable: true
                    example: null
              examples:
                defaultResponse:
                  summary: Default Example
                  value:
                    {
                      "success": true,
                      "data": { },
                      "error": null
                    }
                COMPETITION_MATCH_NOT_FOUND:
                  $ref: '../../openapi.yml/#/components/examples/COMPETITION_MATCH_NOT_FOUND'
                END_OR_WAITING_MATCH_INVALID_FOR_OPERATION:
                  $ref: '../../openapi.yml/#/components/examples/END_OR_WAITING_MATCH_INVALID_FOR_OPERATION'
                MATCH_WINNER_NOT_FOUND:
                  $ref: '../../openapi.yml#/components/examples/MATCH_WINNER_NOT_FOUND'
                ONLY_TOURNAMENT_MATCH_CAN_UPDATE_RESULT:
                  $ref: '../../openapi.yml#/components/examples/ONLY_TOURNAMENT_MATCH_CAN_UPDATE_RESULT'
                IS_BYE_MATCH:
                  $ref: '../../openapi.yml#/components/examples/IS_BYE_MATCH'
                MATCH_RESULT_ALREADY_UP_TO_DATE:
                  $ref: '../../openapi.yml#/components/examples/MATCH_RESULT_ALREADY_UP_TO_DATE'

        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '../../openapi.yml/#/components/responses/Error'
              examples:
                INVALID_TYPE_ERROR:
                  $ref: '../../openapi.yml#/components/examples/INVALID_TYPE_ERROR'

        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '../../openapi.yml/#/components/responses/Error'
              examples:
                IS_NOT_AUTHORIZED:
                  $ref: '../../openapi.yml/#/components/examples/IS_NOT_AUTHORIZED'

  /competitions/{competitionSeq}/fop/{competitionMatchPsSeq}/progress-seconds:
    get:
      summary: FOP 타이머 정보 가져오기
      tags:
        - FOP
      parameters:
        - name: competitionSeq
          in: path
          required: true
          schema:
            type: integer
        - name: competitionMatchPsSeq
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      competitionMatchPsSeq:
                        type: integer
                        description:
                          '매치 seq'
                        example: "1234"
                      progressSeconds:
                        type: integer
                        description:
                          '진행 시간 초단위'
                        example: "87"
                  error:
                    nullable: true
                    example: null
              examples:
                defaultResponse:
                  summary: Default Example
                  value:
                    {
                      "success": true,
                      "data": {
                        "competitionMatchPsSeq": 1234,
                        "progressSeconds": 87
                      },
                      "error": null
                    }

        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '../../openapi.yml/#/components/responses/Error'
              examples:
                IS_NOT_AUTHORIZED:
                  $ref: '../../openapi.yml/#/components/examples/IS_NOT_AUTHORIZED'


  /competitions/{competitionSeq}/fop/{competitionMatchPsSeq}/timer:
    get:
      summary: 경기 진행 시간 가져오기
      tags:
        - FOP
      parameters:
        - name: competitionSeq
          in: path
          required: true
          schema:
            type: integer
        - name: competitionMatchPsSeq
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      competitionMatchPsSeq:
                        type: integer
                        description:
                          '매치 seq'
                        example: "1234"
                      progressSeconds:
                        type: integer
                        description:
                          'stop 할 때 lastSyncTimeMs 이용해서 계산 (초단위)'
                        example: 28
                      lastSyncTimeMillis:
                        type: integer
                        description:
                          ' start, sync 할 때 현재시각 저장, stop 시 null (milliseconds 단위)'
                        example: 1755058320128
                      accumulatedMillis:
                        type: integer
                        description:
                          'start~stop 사이에 heartbeat 시점의 시간들을 누적해서 더한 값 (milliseconds 단위)'
                        example: 52916
                      isRunning:
                        type: boolean
                        description:
                          '타이머 진행중인지'
                        example: true
                      version:
                        type: integer
                        description:
                          'timer 연산 version'
                        example: 43
                  error:
                    nullable: true
                    example: null
              examples:
                defaultResponse:
                  summary: Default Example
                  value:
                    {
                      "competitionMatchPsSeq": 10101,
                      "progressSeconds": 28,
                      "lastSyncTimeMillis": 1755058320128,
                      "accumulatedMillis": 52916,
                      "isRunning": true,
                      "version": 43
                    }

        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '../../openapi.yml/#/components/responses/Error'
              examples:
                IS_NOT_AUTHORIZED:
                  $ref: '../../openapi.yml/#/components/examples/IS_NOT_AUTHORIZED'


  /competitions/{competitionSeq}/fop/timers:
    post:
      summary: 경기 진행 시간 여러개 가져오기
      tags:
        - FOP
      parameters:
        - name: competitionSeq
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - matchSeqList
              properties:
                matchSeqList:
                  type: array
                  description: '매치 seq 리스트'
                  items:
                    type: integer
                  example: [ 10015,20032 ]
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      required:
                        - competitionMatchPsSeq
                        - progressSeconds
                        - accumulatedMillis
                        - isRunning
                        - version
                      properties:
                        competitionMatchPsSeq:
                          type: integer
                          description: '매치 seq'
                          example: 56331
                        progressSeconds:
                          type: integer
                          description: 'stop 할 때 lastSyncTimeMs 이용해서 계산 (초단위)'
                          example: 30721
                        lastSyncTimeMillis:
                          type: integer
                          nullable: true
                          description: 'start, sync 할 때 현재시각 저장, stop 시 null (milliseconds 단위)'
                          example: null
                        accumulatedMillis:
                          type: integer
                          description: 'start~stop 사이에 heartbeat 시점의 시간들을 누적해서 더한 값 (milliseconds 단위)'
                          example: 0
                        isRunning:
                          type: boolean
                          description: '타이머 진행중인지'
                          example: false
                        version:
                          type: integer
                          description: 'timer 연산 version'
                          example: 9
                  error:
                    nullable: true
                    example: null
              examples:
                defaultResponse:
                  summary: Default Example
                  value:
                    [
                      {
                        "competitionMatchPsSeq": 56331,
                        "progressSeconds": 30721,
                        "lastSyncTimeMillis": null,
                        "accumulatedMillis": 0,
                        "isRunning": false,
                        "version": 9
                      },
                      {
                        "competitionMatchPsSeq": 60818,
                        "progressSeconds": 24277,
                        "lastSyncTimeMillis": null,
                        "accumulatedMillis": 0,
                        "isRunning": false,
                        "version": 29
                      }
                    ]
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '../../openapi.yml/#/components/responses/Error'
              examples:
                IS_NOT_AUTHORIZED:
                  $ref: '../../openapi.yml/#/components/examples/IS_NOT_AUTHORIZED'